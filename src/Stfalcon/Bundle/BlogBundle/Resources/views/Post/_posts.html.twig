<div class="posts-list">
    {% for post in posts %}
        {% if post.previewMode != true or is_granted('ROLE_ADMIN') %}
            <article class="blog-post">
                {% include 'StfalconBlogBundle:Post:_post_header.html.twig' with {'post': post, 'linkTitle': true} %}
                <div class="post-content">
                    <p>
                        {{ post.text|cutMore|highlightCode|raw }}
                    </p>
                    {% if hasMore(post.text) %}
                        <a class="read-more  next-page" href="{{ path('blog_post_view', { 'slug': post.slug }) }}#more">
                            {{ 'Читать дальше'|trans }}
                        </a>
                    {% endif %}
                </div>
                {% include 'StfalconBlogBundle:Post:_post_tags.html.twig' with {'post': post} %}
            </article>
        {% endif %}
    {% endfor %}
</div>
